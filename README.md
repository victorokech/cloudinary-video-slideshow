<p align="center"><a href="https://cloudinary.com" target="_blank">			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 96.77" width="500" height="97" fill="blue">
				<path
					d="M160.53 30.41a17.14 17.14 0 0 1 13.56 6.7.69.69 0 0 0 1 .11l5.71-4.55a.71.71 0 0 0 .11-1 26 26 0 0 0-20.61-10.13c-14.91 0-27 12.85-27 28.65s12.13 28.65 27 28.65a25.85 25.85 0 0 0 20.6-10.12.69.69 0 0 0-.12-1l-5.7-4.5a.71.71 0 0 0-1 .11A17.26 17.26 0 0 1 160.53 70c-10.19 0-18.16-8.7-18.16-19.79s7.97-19.8 18.16-19.8ZM188.27 19.91h7.16a.71.71 0 0 1 .71.71V77.4a.7.7 0 0 1-.7.7h-7.16a.71.71 0 0 1-.71-.71V20.62a.7.7 0 0 1 .7-.71ZM220.54 39.55c-9.49 0-19.09 6.72-19.09 19.57 0 11.29 8.21 19.81 19.09 19.81s19.17-8.52 19.17-19.81-8.24-19.57-19.17-19.57Zm10.53 19.57c0 6.52-4.53 11.44-10.53 11.44s-10.44-4.92-10.44-11.44 4.49-11.2 10.44-11.2 10.53 4.81 10.53 11.2ZM278.3 40.37h-7.16a.7.7 0 0 0-.71.7v19c0 7.42-5.12 10.05-9.51 10.05-3.88 0-7.79-2.93-7.79-9.48V41.07a.7.7 0 0 0-.71-.7h-7.16a.7.7 0 0 0-.7.7v20.5c0 11.25 5.09 17.44 14.34 17.44 3.36 0 8.8-1.93 10.84-6.19l.69.14v4.44a.71.71 0 0 0 .71.71h7.16a.71.71 0 0 0 .71-.71V41.07a.7.7 0 0 0-.71-.7ZM322.27 19.91h-7.17a.7.7 0 0 0-.7.71V46l-.44-.7c-2.18-3.51-6.87-5.78-11.95-5.78-8.76 0-17.62 6.75-17.62 19.65 0 11.25 7.61 19.73 17.69 19.73 3.84 0 9.25-1.54 11.88-5.86l.44-.72v5.08a.7.7 0 0 0 .7.71h7.17a.7.7 0 0 0 .7-.71V20.62a.7.7 0 0 0-.7-.71Zm-8 39.21a11 11 0 0 1-10.75 11.36c-5.86 0-10.45-5-10.45-11.36s4.59-11.2 10.45-11.2a11 11 0 0 1 10.72 11.2ZM333 40.37h7.16a.7.7 0 0 1 .7.7V77.4a.7.7 0 0 1-.7.7H333a.71.71 0 0 1-.71-.71V41.07a.71.71 0 0 1 .71-.7ZM336.61 21.06a5.57 5.57 0 0 0-5.69 5.57 5.64 5.64 0 0 0 5.69 5.58 5.54 5.54 0 0 0 5.61-5.58 5.48 5.48 0 0 0-5.61-5.57ZM370.35 39.55c-3.14 0-8.72 1.69-10.85 6.19l-.69-.14v-4.53a.7.7 0 0 0-.71-.7h-7.16a.7.7 0 0 0-.7.7V77.4a.7.7 0 0 0 .7.71h7.16a.71.71 0 0 0 .71-.71v-19c0-7.36 5.12-10 9.51-10 3.88 0 7.79 2.91 7.79 9.4v19.6a.71.71 0 0 0 .71.71H384a.71.71 0 0 0 .71-.71V56.91c-.02-11.19-5.12-17.36-14.36-17.36ZM427.48 40.37h-7.16a.7.7 0 0 0-.71.7v5l-.43-.7c-2.19-3.51-6.88-5.78-12-5.78-8.75 0-17.62 6.75-17.62 19.65 0 11.25 7.61 19.73 17.7 19.73 3.83 0 9.24-1.54 11.88-5.86l.43-.72v5.01a.71.71 0 0 0 .71.71h7.16a.7.7 0 0 0 .7-.71V41.07a.7.7 0 0 0-.66-.7Zm-8 18.75a11 11 0 0 1-10.78 11.36c-5.86 0-10.44-5-10.44-11.36s4.58-11.2 10.44-11.2a11 11 0 0 1 10.76 11.2ZM460.15 40.5a13.66 13.66 0 0 0-5.14-1c-4.76 0-8.22 2.85-10 8.25l-.64-.09v-6.59a.7.7 0 0 0-.71-.7h-7.16a.7.7 0 0 0-.71.7V77.4a.71.71 0 0 0 .71.71h7.24a.7.7 0 0 0 .7-.71V65c0-14.8 5.91-17 9.44-17a11 11 0 0 1 4.33.9.72.72 0 0 0 .61 0 .7.7 0 0 0 .36-.48l1.42-7.11a.71.71 0 0 0-.45-.81ZM499.88 40.68a.69.69 0 0 0-.59-.31h-7.71a.72.72 0 0 0-.66.45L481.59 65l-9.42-24.18a.72.72 0 0 0-.66-.45h-7.86a.69.69 0 0 0-.58.31.7.7 0 0 0-.07.66l14 34.38-7.73 20.09a.71.71 0 0 0 .66 1h7.5a.69.69 0 0 0 .65-.45l21.86-55a.69.69 0 0 0-.06-.68ZM97.91 28.11A40.38 40.38 0 0 0 59.73 0 39.62 39.62 0 0 0 24.6 20.87a29.88 29.88 0 0 0-7.21 56.56l.75.34h.05v-8.5a22.29 22.29 0 0 1 9.29-41.16l2.1-.22.92-1.89A32.15 32.15 0 0 1 59.73 7.57a32.7 32.7 0 0 1 31.55 25l.72 2.86h3a18.53 18.53 0 0 1 18.15 18.46c0 7.05-4.07 12.82-11 15.74v8.06l.5-.16c11.14-3.65 18.06-12.71 18.06-23.64a26.19 26.19 0 0 0-22.8-25.78Z"></path>
				<path
					d="m45.07 76.79 1.66 1.66a.33.33 0 0 1-.23.56H33.4a6 6 0 0 1-6-6V47.57a.33.33 0 0 0-.33-.33h-2.8a.33.33 0 0 1-.24-.56l11.12-11.12a.33.33 0 0 1 .47 0l11.11 11.12a.33.33 0 0 1-.23.56h-2.84a.34.34 0 0 0-.34.33v25a6 6 0 0 0 1.75 4.22ZM69.64 76.79l1.67 1.66a.33.33 0 0 1-.24.56H58a6 6 0 0 1-6-6V54a.34.34 0 0 0-.33-.34h-2.83a.33.33 0 0 1-.23-.56L59.72 42a.33.33 0 0 1 .47 0l11.12 11.08a.33.33 0 0 1-.24.56h-2.84a.34.34 0 0 0-.33.34v18.59a6 6 0 0 0 1.74 4.22ZM94.22 76.79l1.66 1.66a.33.33 0 0 1-.23.56H82.54a6 6 0 0 1-6-6V60.38a.33.33 0 0 0-.33-.33h-2.8a.33.33 0 0 1-.23-.57L84.3 48.37a.32.32 0 0 1 .46 0l11.12 11.11a.33.33 0 0 1-.23.57H92.8a.33.33 0 0 0-.33.33v12.19a6 6 0 0 0 1.75 4.22Z"></path>
			</svg>
</a></p>

<h1 align="center">
 Creating a Video Slideshow with Cloudinary & Laravel
</h1>

Cloudinary is a Software-as-a-Service (SaaS) solution for managing all your web or mobile application’s media assets in
the cloud. Cloudinary offers an end-to-end solution for all your image and video needs, including the upload, storage,
administration, transformation and optimized delivery.

Laravel is a PHP framework developed with developer productivity in mind. The framework also aims to evolve with the web and has already incorporated several new features and ideas in the web development world—such as job queues, **API authentication** out of the box, real-time communication, and much more.

## Introduction

Slideshows are the perfect addition to your media collection. They make your social media content engaging, fun and memorable and are great for business promotional purposes. In this article, we will create a video slideshow using Laravel and Cloudinary.

Some use cases for slideshows include:

- Creating a personalized video of a user’s recent items.
- Creating a personalized video of items a user left in their shopping cart.
- Creating a daily sale video of different products automatically.
- Creating a real-estate video out of apartment images.

The possibilities are endless since with dynamic transformations like Content-Aware Crop you can create video slideshows for your Instagram, WhatsApp and TikTok Stories.

Let's get started.

## PHPSandbox and Github

The final project can be viewed on [PHPSandbox](https://phpsandbox.io/e/x/myfy4?layout=EditorPreview&defaultPath=%2F&theme=dark&showExplorer=no) and the entire source code is available on my [Github](https://github.com/victorokech/cloudinary-video-slideshow) repository.

## Prerequisites

Using Cloudinary in your Laravel projects is pretty straightforward. However, for you to be able to easily follow along,
you need to have a good command of your terminal, Git and entry knowledge of PHP specifically with the Laravel
framework.

## Getting Started

Being that Laravel is a PHP Framework, we will need Composer. Like any modern PHP framework, Laravel uses Composer to manage its dependencies. So, before we can
start ensure you have Composer installed on your machine. Follow step 1 below to install Composer and PHP.

1. Install [Composer](https://getcomposer.org/) and [PHP](https://www.php.net/manual/en/install.windows.tools.php) on
   your development or production machine.
2. Install Laravel
   
   1. Via Composer:
      
      `composer create-project --prefer-dist laravel/laravel cloudinary-video-slideshow`
   2. Via Laravel Installer
      
      `composer global require laravel/installer`
      
      `laravel new cloudinary-video-slideshow`
3. In step 2 above we have installed the Laravel Installer and used it to scaffold a new application in the folder `cloudinary-video-slideshow`. With Laravel installed, we should be able to start and test the server ensuring everything is okay. Change the directory to the project folder and run the local development server by typing the following commands:
   
   `cd cloudinary-video-slideshow`
   
   `php artisan serve`

The Laravel project is now up and running. When you open `http://localhost:8000` on your computer, you should see the image below:

![Laravel Server Running](https://res.cloudinary.com/dgrpkngjn/image/upload/v1655887283/watermark-api/assets/laravel-running_zqk8ol.png)

## Setting up Cloudinary’s Laravel SDK

Cloudinary has a tonne of features from media upload, storage, administration, manipulation to optimization and delivery. In this article, we will use Cloudinary Video Transformations to combine existing or newly uploaded media files to create a slideshow.

1. Sign up for a free Cloudinary account then navigate to the Console page and take note of your Cloud name, API Key and
   API Secret.
   
   ![Cloudinary Dashboard](https://res.cloudinary.com/dgrpkngjn/image/upload/v1655976836/assets/cloudinary_dashboard.png)
2. Install [Cloudinary’s Laravel SDK](https://github.com/cloudinary-labs/cloudinary-laravel#installation):
   
   `composer require cloudinary-labs/cloudinary-laravel`

**Note**: Please ensure you follow all the steps in the #Installation section. Publish the configuration file and add
the Cloudinary credentials you noted in Step 1 to the `.env` file.

```
CLOUDINARY_API_KEY=YOUR_CLOUDINARY_API_KEY
CLOUDINARY_API_SECRET=YOUR_CLOUDINARY_API_SECRET
CLOUDINARY_CLOUD_NAME=YOUR_CLOUDINARY_CLOUD_NAME
```

## Generating a Slideshow

There are two ways you can generate a slide show depending on your use case:

1. Using a delivery URL - here you can use a template downloaded from Cloudinary to combine the relevant components in a delivery URL that looks as follows:
   `https://res.cloudinary.com/<cloudname>/video/upload/fn_render:<global-settings>;vars_(<slide-settings>(<individual-slide>))/<global-transformations>/<template>.<ext>`
2. Using the Upload API - this is the technique we will use in this article. We will use the `create_slideshow` method of the Upload API. This will create a new video in your Cloudinary account based on the parameters provided.

## Multiple File Upload with Livewire

To generate a video slideshow we will need a UI (User Interface), we will use the Laravel package Livewire to build this.

1. Install Livewire Package by running the following command in your Laravel project:
   
   `composer require livewire/livewire`
2. Include Livewire scripts and styles on every page that will be using Livewire. In our case `welcome.blade.php`:

```html
...
    @livewireStyles
</head>
<body>
    ...
  
    @livewireScripts
</body>
</html>
```

3. We will then create a Livewire Component to handle our image uploads:
   
   `php artisan make:livewire MultipleFileUpload`

This will create two files, first `app/Http/Livewire/MultipleFileUpload.php` and the other one
in `resources/views/livewire/multiple-file-upload.blade.php`

Now you can use this component anywhere in your Laravel project using the following snippet:

`<livewire:multiple-file-upload/>`

or

`@livewire('multiple-file-upload')`

3. Open `resources/views/welcome.blade.php` and add the following code within the `<body></body>` tags as shown below:

```html
<body class="antialiased">
  <div>
    @livewire('multiple-file-upload')
  </div>
</body>
```

This includes the Livewire component we created earlier in our `welcome.blade.php`.

**Note:** Please ensure you go through the [Livewire documentation](https://laravel-livewire.com/docs/2.x/quickstart), to learn how to install and set it up.

3. Open the file `resources/views/livewire/multiple-file-upload.blade.php` and populate it with the following code:

```html
<form class="mb-5" wire:submit.prevent="uploadFiles">
  <div class="form-group row mt-5 mb-3">
    <div class="input-group">
      <input type="file" class="form-control @error('files'|'files.*') is-invalid @enderror" placeholder="Choose files..." wire:model="files" multiple>
	@error('files'|'files.*')
	  <div class="invalid-feedback">{{ $message }}</div>
	@enderror
    </div>
    <small class="text-muted text-center mt-2" wire:loading wire:target="files">
      {{ __('Uploading') }}…
    </small>
  </div>
  <div class="text-center">
     <button type="submit" class="btn btn-sm btn-primary w-25">
       {{ __('Generate Slideshow') }}
     </button>
   </div>
</form>
```

This is our Livewire Component view, this basically will display a form with a multiple-file input and a button.

You will see the implementation in code shortly.

## Implementation in Code

Open the file `app/Http/Livewire/MultipleFileUpload.php`. Here, we are going to add a method that will handle the multiple files selected by the user, upload them to Cloudinary and save their `public_id`'s in an array that we will use later on.

Add the following code to this file.

1. First, we use Livewires `WithFileUploads` to help us with file uploads, then create two variables `$media`
   and `$optimizedImage` which is an array that will contain the image URLs we get back from Cloudinary.
   
   ```php
   use Livewire\WithFileUploads;
   
   public $files = [];
   public $slides = [];
   
   // Needed to specify the type of media file for our slideshow
   public $imageExt = ['jpeg', 'jpg', 'png', 'gif',];
   ```
2. Secondly, we will create the `uploadFiles` function which will upload the media files to [Cloudinary](https://cloudinary.com). We will apply specific transformations that will optimize our images for our slideshow with an aspect ratio of `9:16` which works great for most social media platforms.
   
   ```php
   public function uploadFiles() {
    ...
   }
   ```
3. Let's populate our method in step 2 above:
   
   ```php
   public function uploadFiles() {
     /* First we validate the input from the user. We will take multiple image and or video files less than 10MB in size */
     $this->validate([
       'files'   => [
         'required',
         'max:102400'
        ],
       'files.*' => 'mimes:jpeg,jpg,png,gif,avi,mp4,webm,mov,ogg,mkv,flv,m3u8,ts,3gp,wmv,3g2,m4v'
     ]);
   
     /* We will now upload the media files to Cloudinary with specified transformations and get back the public_id */
     foreach ($this->files as $file) {
       $media = cloudinary()->upload($file->getRealPath(), [
         'folder'         => 'video-slideshow',
         'public_id'      => $file->getClientOriginalName(),
         'transformation' => [
           'aspect_ratio' => '9:16',
   	'gravity'      => 'auto', //can be face, face etc
   	'crop'         => 'fill'
         ]
       ])->getPublicId();
   
       /* Here we will check whether the file is an image or video from its extension and generate the appropriate media type parameter for the manifest_json */
       if (in_array($file->getClientOriginalExtension(), $this->imageExt)) {
         $this->slides[] = ['media' => 'i:'.$media];
       } else {
         $this->slides[] = ['media' => 'v:'.$media];
       }
     }
   
     /* Creating the manifest_json parameter */
     $manifestJson = json_encode([
       "w"    => 540,
       "h"    => 960,
       "du"   => 60,
       "vars" => [
         "sdur"   => 3000,
         "tdur"   => 1500,
         "slides" => $this->slides,
        ],
     ]);
   
     /* signingData for generating the signature  */
     $cloudName = env('CLOUDINARY_CLOUD_NAME');
     $timestamp = (string) Carbon::now()->unix();
     $signingData = [
       'timestamp'     => $timestamp,
       'manifest_json' => $manifestJson,
       'public_id'     => 'test_slideshow',
       'folder'        => 'video-slideshow',
       'notification_url' => env('CLOUDINARY_NOTIFICATION_URL')
     ];
     $signature = ApiUtils::signParameters($signingData, env('CLOUDINARY_API_SECRET'));
   
     /* Using Laravel Http Request to send a POST request to the create_slideshow end point */
     $response = Http::post("https://api.cloudinary.com/v1_1/$cloudName/video/create_slideshow", [
       'api_key'          => env('CLOUDINARY_API_KEY'),
       'signature'        => $signature,
       'timestamp'        => $timestamp,
       'manifest_json'    => $manifestJson,
       'resource_type'    => 'video',
       'public_id'        => 'test_slideshow',
       'folder'           => 'video-slideshow',
       'notification_url' => env('CLOUDINARY_NOTIFICATION_URL')
     ]);
   
     // Determine if the status code is >= 200 and < 300...
     if ($response->successful()) {
       session()->flash('message', 'Slideshow generated successfully!');
     } else {
       session()->flash('error', 'Slideshow generation failed! Try again later.');
     }
   }
   ```
   
   The code above uploads the media files to Cloudinary returning their ` public_id`'s. Let's talk about the code.
   
   - ### Uploading the media files
     
     We will get the files from user input and upload them to Cloudinary and use their `public_id`'s to create the media type parameter `media_` which will take the form `media_i:<public_id>` for images and `media_v:<public_id>` for videos.

```php
foreach ($this->files as $file) {
  $media = cloudinary()->upload($file->getRealPath(), [
  'folder'         => 'video-slideshow',
  'public_id'      => $file->getClientOriginalName(),
  'transformation' => [
    'aspect_ratio' => '9:16',
    'gravity'      => 'auto', //can be face, face etc
    'crop'         => 'fill'
  ]])->getPublicId();

  if (in_array($file->getClientOriginalExtension(), $this->imageExt)) {
    $this->slides[] = ['media' => 'i:'.$media];
  } else {
    $this->slides[] = ['media' => 'v:'.$media];
  }
}
```

- ### The `manifest_json` parameter

The create a slideshow endpoint requires either a `manifest_transformation` or a `manifest_json`. The `manifest_json` parameter is a stringified json parameter, allowing you to define your slideshow settings in a structured data format, which then needs to be converted to a string.

```php
$manifestJson = json_encode([
  "w"    => 540, 
  "h"    => 960,
  "du"   => 60,
  "vars" => [
    "sdur"   => 3000,
    "tdur"   => 1500,
    "slides" => $this->slides,
  ],
]);
```

You can checkout the [reference](https://cloudinary.com/documentation/video_slideshow_generation#reference) for full details on the relevant options.

- ### Generating a signature

Since we are sending a request to the Cloudinary API, we need to create a signature to authenticate our request. Cloudinary SDKs automatically generates this signature for any upload or admin method that requires it. However, in this case we are making a direct call to the REST API and we need to generate the signature.

```php
$cloudName = env('CLOUDINARY_CLOUD_NAME');
  $timestamp = (string) Carbon::now()->unix();
  $signingData = [
    'timestamp'     => $timestamp,
    'manifest_json' => $manifestJson,
    'public_id'     => 'test_slideshow',
    'folder'        => 'video-slideshow',
    'notification_url' => env('CLOUDINARY_NOTIFICATION_URL')
  ];

$signature = ApiUtils::signParameters($signingData, env('CLOUDINARY_API_SECRET'));
```

The signature is a SHA-1 or SHA-256 hexadecimal message digest created based on the following parameters:

* All parameters added to the method call should be included  **except** : `file`, `cloud_name`, `resource_type` and your `api_key`.
* Add the `timestamp` parameter.
* Sort all the parameters in alphabetical order.
* Separate the parameter names from their values with an `=` and join the parameter/value pairs together with an `&`.

***Tip:*** We took a shortcut and used the Cloudinary SDK `ApiUtils` to create the signature:

```php
$signature = ApiUtils::signParameters($signingData, env('CLOUDINARY_API_SECRET'));
````

- ### Sending the `POST` request to Cloudinary

With everything ready we can send the request to Cloudinary and start the video slideshow generation. We will use Laravel's Http Request based on Guzzle.

```php
$response = Http::post("https://api.cloudinary.com/v1_1/$cloudName/video/create_slideshow", [
  'api_key'          => env('CLOUDINARY_API_KEY'),
  'signature'        => $signature,
  'timestamp'        => $timestamp,
  'manifest_json'    => $manifestJson,
  'resource_type'    => 'video',
  'public_id'        => 'test_slideshow',
  'folder'           => 'video-slideshow',
  'notification_url' => env('CLOUDINARY_NOTIFICATION_URL')
]);
```

**Note:** Once our slideshow is ready Cloudinary will send us a Webhook notification to the  `notification_url`.

If you successfully implemented the code above, you should be able to see the following when you navigate to `http://localhost:8000`:

![Cloudinary Video Slideshow](https://res.cloudinary.com/dgrpkngjn/image/upload/v1656670841/video-slideshow/assets/cloudinary-video-slideshow_ggzziv.png)

## Handling the Webhook Notification

Once we send the request successfully. Cloudinary will send us a `pending` response as it processes the generation of the video slideshow:

![Cloudinary Video Slideshow Success](https://res.cloudinary.com/dgrpkngjn/image/upload/v1656673744/video-slideshow/assets/cloudinary-video-slideshow-successful-request_hiktz2.png)

Cloudinary will send the following response:

```json
{
  "status": "processing",
  "public_id": "test_slideshow",
  "batch_id": "00b45635e533ab11e63585dd145ab7816ca19bff2bf3f298a0e66d87405ab7793"
}
```

When the Cloudinary is done generating the slideshow it will send us a Webhook notification to the notification URL we provided in the request.

```json
{
  "notification_type": "upload",
  "timestamp": "2021-08-11T07:44:41+00:00",
  "request_id": "799b0f8305df4206b6d8f5dbdde0cdfc",
  "asset_id": "640cb419bed70ef5b86e2bbe7cbb388a",
  "public_id": "test_slideshow",
  "version": 1628667799,
  "version_id": "afcd9bdec6552adc43d7f316da077200",
  "width": 500,
  "height": 500,
  "format": "mp4",
  "resource_type": "video",
  "created_at": "2021-08-11T07:43:19Z",
  "tags": [],
  "pages": 0,
  "bytes": 521868,
  "type": "upload",
  "etag": "d7b3ecf1f5508af9fb8518158e78642f",
  "placeholder": false,
  "url": "http://res.cloudinary.com/demo/video/upload/v1628667799/test_slideshow.mp4",
  "secure_url": "https://res.cloudinary.com/demo/video/upload/v1628667799/test_slideshow.mp4",
  "access_mode": "public",
  "audio": {},
  "video": {
    "pix_format": "yuv420p",
    "codec": "h264",
    "level": 30,
    "profile": "High",
    "bit_rate": "163900",
    "time_base": "1/15360"
  },
  "frame_rate": 30,
  "bit_rate": 166997,
  "duration": 25,
  "rotation": 0,
  "nb_frames": 750
}
```

We will handle this notification by creating a `WebhookController.php` by typing the following command:

`php artisan make:controller WebhookController`

In the file created `app/Http/Controllers/WebhookController.php` we will add the following code:

```php
public function cloudinary(Request $request) {
  //Verification
  $verified = SignatureVerifier::verifyNotificationSignature(json_encode($request), $request->header('X-Cld-Timestamp'), $request->header('X-Cld-Signature'));

  // If the signature is verified get the secure url to our slideshow
  if ($verified) {
    $secureUrl = $request->secure_url;

    return view('livewire.view-slideshow', ['slideshow_url' => $secureUrl]);
  }

  return response('Unverified', 401);
}
```

***Tip:*** A webhook is a mechanism where an application can notify another application that something has happened.

When we receive the notification from Cloudinary we can notify the user by sending them an e-mail, sms or a push notification. It is really up to you but, in this case we are just returning a view and passing the slideshow URL to it.

Since the notifcation from Cloudinary will be an external request we will need to allow it through the `VerifyCsrfToken.php` middleware to prevent CSRF errors.

```php
...
  protected $except = [
    'webhooks'
  ];
}
```

Next, we will create the webhook route in `routes/api.php`.

```php
...
  //webhooks client
  Route::post('webhooks/cloudinary', [WebhookController::class, 'cloudinary']);
````

And finally update our `CLOUDINARY_NOTIFICATION_URL` in the environment variables file `.env` as follows:

```php
CLOUDINARY_NOTIFICATION_URL=https://<example.com>/api/webhooks/cloudinary
```

Finally, we can enjoy our slideshow:

[Video Slideshow](https://res.cloudinary.com/dgrpkngjn/video/upload/v1656676242/video-slideshow/test_slideshow.mp4)

## Conclusion

Yes, Cloudinary makes it easy to generate a slideshow and by automating and applying some transformations. This is beautiful since it allows you to focus on other things like promoting your business with the newly created slideshow.

The possibilities are endless, check out Cloudinary for your A to Z media management - upload, storage, administration, manipulation, optimization and delivery.

[Get started](https://cloudinary.com/signup) with Cloudinary in your Laravel projects for FREE!

